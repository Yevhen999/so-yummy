{"version":3,"file":"static/js/484.f76d7a71.chunk.js","mappings":"4RAgIA,UAlHkB,WAChB,OAA8BA,EAAAA,EAAAA,UAAS,IAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA0BF,EAAAA,EAAAA,UAAS,MAAnC,eAAOG,EAAP,KAAcC,EAAd,KACA,GAAkCJ,EAAAA,EAAAA,WAAS,GAA3C,eAAOK,EAAP,KAAkBC,EAAlB,KACA,GAAwBN,EAAAA,EAAAA,UAAS,GAAjC,eAAOO,EAAP,KAAaC,EAAb,KACQC,GAAUC,EAAAA,EAAAA,KAAVD,OAERE,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAQ,mCAAG,sGAEbN,GAAa,GACbF,EAAS,MAHI,SAIKS,EAAAA,EAAAA,IAChB,uDACA,CACEC,QAAS,CAAEC,cAAc,UAAD,OAAYN,MAP3B,OAIPO,EAJO,OAULC,EAASD,EAAIC,KAAbA,KACRf,EAAWe,GAXE,kDAabb,EAAS,EAAD,IAbK,yBAebE,GAAa,GAfA,6EAAH,qDAkBdM,GACD,GAAE,CAACH,IAEJ,IAAMS,EAAY,mCAAG,WAAMC,GAAN,uFAEjBb,GAAa,GACbF,EAAS,MAHQ,SAICS,EAAAA,EAAAA,OAAA,+DACwCM,GACxD,CACEL,QAAS,CAAEC,cAAc,UAAD,OAAYN,MAPvB,cAIXO,EAJW,OAUjBd,GAAW,SAAAkB,GAAW,OACpBA,EAAYC,QAAO,SAAAC,GAAM,OAAIA,EAAOC,MAAQJ,CAAnB,GADL,IAVL,kBAcVH,EAAIC,MAdM,kCAgBjBb,EAAS,EAAD,IAhBS,yBAkBjBE,GAAa,GAlBI,6EAAH,sDAsBZkB,EAAavB,EAAQwB,OAAS,EAAIC,KAAKC,KAAK1B,EAAQwB,OAAS,GAAK,EAGlEG,EADU,EACYrB,EACtBsB,EAAaD,EAFH,EAGVE,EAAa7B,EAAQ8B,MAAMF,EAAYD,GAY7C,OACE,gCACGvB,IAAa,SAAC,IAAD,IACbF,GACC,SAAC,UAAD,KAEA,2BACE,UAAC,IAAD,YACE,SAAC,IAAD,CAAe6B,MAAM,eACpBF,GAAcA,EAAWL,OAAS,GACjC,SAAC,KAAD,UACGK,EAAWG,KAAI,gBAAGV,EAAH,EAAGA,IAAKW,EAAR,EAAQA,MAAOF,EAAf,EAAeA,MAAOG,EAAtB,EAAsBA,KAAMC,EAA5B,EAA4BA,YAA5B,OACd,SAAC,KAAD,WACE,SAAC,IAAD,CAEEF,MAAOA,GAAgBG,EACvBL,MAAK,OAAEA,QAAF,IAAEA,EAAAA,EAAS,WAChBb,GAAII,EACJa,YAAW,OAAEA,QAAF,IAAEA,EAAAA,EAAe,iBAC5BD,KAAI,OAAEA,QAAF,IAAEA,EAAAA,EAAQ,KACd5B,KAAK,aACL+B,SAAUpB,GAPLK,IAFEA,EADG,OAgBlB,SAAC,KAAD,WACE,SAAC,IAAD,CAAqBS,MAAM,sEAG9BR,EAAa,IACZ,SAAC,IAAD,CACEA,WAAYA,EACZe,YAAahC,EACbiC,aA9CW,SAAArB,GACvBX,EAAQW,EACT,EA6CasB,iBA3CoB,WAChCjC,GAAQ,SAAAkC,GAAS,OAAIA,EAAY,CAAhB,GAClB,EA0CaC,kBAxCoB,WAChCnC,GAAQ,SAAAkC,GAAS,OAAIA,EAAY,CAAhB,GAClB,WA8CF,C","sources":["pages/MyRecipes/MyRecipes.jsx"],"sourcesContent":["import axios from 'axios';\nimport { useAuth } from '../../hooks/useAuth';\n\nimport { Loader } from 'components/Loader/Loader';\nimport { MainPageTitle } from 'components/MainPageTitle/MainPageTitle';\nimport { RecipeCard } from 'components/RecipeCard/RecipeCard';\nimport { ErrorImageContainer } from 'components/ErrorImageContainer/ErrorImageContainer';\nimport { PagesWrapper } from 'components/PagesWrapper/PagesWrapper';\nimport { useEffect, useState } from 'react';\nimport { Container, List, Item } from 'pages/Favorites/Favorites.styled';\nimport { Pagination } from 'components/Pagination/Pagination';\nimport placeholder from '../../img/placeholder.jpg';\nimport ErrorPage from 'pages/ErrorPage/ErrorPage';\n\nconst MyRecipes = () => {\n  const [recipes, setRecipes] = useState([]);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const { token } = useAuth();\n\n  useEffect(() => {\n    const fetchApi = async () => {\n      try {\n        setIsLoading(true);\n        setError(null);\n        const res = await axios.get(\n          'https://soyummy-tw3y.onrender.com/api/v1/own-recipes',\n          {\n            headers: { Authorization: `Bearer ${token}` },\n          }\n        );\n        const { data } = res.data;\n        setRecipes(data);\n      } catch (error) {\n        setError(error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchApi();\n  }, [token]);\n\n  const deleteRecipe = async id => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const res = await axios.delete(\n        `https://soyummy-tw3y.onrender.com/api/v1/own-recipes/${id}`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      setRecipes(prevRecipes =>\n        prevRecipes.filter(recipe => recipe._id !== id)\n      );\n\n      return res.data;\n    } catch (error) {\n      setError(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const totalPages = recipes.length > 0 ? Math.ceil(recipes.length / 4) : 0;\n\n  const perPage = 4;\n  const lastIndex = perPage * page;\n  const startIndex = lastIndex - perPage;\n  const renderList = recipes.slice(startIndex, lastIndex);\n  const handlePageChange = id => {\n    setPage(id);\n  };\n\n  const handlePageChangeDecrement = () => {\n    setPage(prevState => prevState + 1);\n  };\n\n  const handlePageChangeIncrement = () => {\n    setPage(prevState => prevState - 1);\n  };\n  return (\n    <>\n      {isLoading && <Loader />}\n      {error ? (\n        <ErrorPage />\n      ) : (\n        <main>\n          <PagesWrapper>\n            <MainPageTitle title=\"My recipes\" />\n            {renderList && renderList.length > 0 ? (\n              <List>\n                {renderList.map(({ _id, thumb, title, time, description }) => (\n                  <Item key={_id}>\n                    <RecipeCard\n                      key={_id}\n                      thumb={thumb ? thumb : placeholder}\n                      title={title ?? 'No title'}\n                      id={_id}\n                      description={description ?? 'No description'}\n                      time={time ?? '--'}\n                      page=\"My recipes\"\n                      onDelete={deleteRecipe}\n                    />\n                  </Item>\n                ))}\n              </List>\n            ) : (\n              <Container>\n                <ErrorImageContainer title=\"You don't have recipes in favorites yet, add your first recipe!\" />\n              </Container>\n            )}\n            {totalPages > 1 && (\n              <Pagination\n                totalPages={totalPages}\n                currentPage={page}\n                onSelectPage={handlePageChange}\n                onArrowLeftClick={handlePageChangeDecrement}\n                onArrowRightClick={handlePageChangeIncrement}\n              />\n            )}\n          </PagesWrapper>\n        </main>\n      )}\n    </>\n  );\n};\nexport default MyRecipes;\n"],"names":["useState","recipes","setRecipes","error","setError","isLoading","setIsLoading","page","setPage","token","useAuth","useEffect","fetchApi","axios","headers","Authorization","res","data","deleteRecipe","id","prevRecipes","filter","recipe","_id","totalPages","length","Math","ceil","lastIndex","startIndex","renderList","slice","title","map","thumb","time","description","placeholder","onDelete","currentPage","onSelectPage","onArrowLeftClick","prevState","onArrowRightClick"],"sourceRoot":""}